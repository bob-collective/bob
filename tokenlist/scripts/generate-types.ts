import fs from 'node:fs';
import { datadir, generatedTypes } from '../config';

const tokenlistDirectories = fs.readdirSync(datadir).sort((a, b) => {
  return a.toLowerCase().localeCompare(b.toLowerCase());
});

const fileDisclaimer = `/**
 * This file is auto-generated by running 'pnpm generate-types'
 * Do not edit this file directly.
 */\n\n`;

const content = `export type TokenId = ${tokenlistDirectories
  .map((dir) => `'${dir}'`)
  .join(' | ')};\n\n`;

fs.writeFileSync(generatedTypes, fileDisclaimer + content);
